<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gallery</title>
    <link rel="stylesheet" href="gallery.css" />
    <link rel="stylesheet" href="main.css" />
</head>
<body>

<div id="scroll-progress"></div>
<div id="header">
    <img class="logo" src="assets/deyoungsters-logo.svg" width="150" height="75" />
    <a href="">About</a>
    <a href="">Help</a>
</div>

<div id="banner">
    <div class="main-content">
        <h1>Remix <br />&nbsp;&nbsp;&nbsp;&nbsp;Gallery</h1>
        <div class="action-box">
            <span>Mix and match artists' creations to make <br/> your own halftone masterpieces</span>
            <div id="action-buttons">
                <button class="upload">
                    <br />
                    <label>Upload an image</label>
                    <br />
                    <img src="assets/upload.svg" />
                </button>
                <button class="gallery" id="gallery-button">
                    <br />
                    <label>Start from the gallery</label>
                    <br />
                    <img src="assets/gallery.svg" />
                </button>
            </div>
        </div>
    </div>
</div>

<div id="gallery">
    <div id="thumb-container"></div>
    <button id="close-btn">x</button>
    <div id="full-image"></div>
    <div id="info">
        <h3>Created by:</h3>
        <span>Kelly H.</span>
        <button>Remix It!</button>
    </div>
</div>
<script type="module">
    import {renderGallery, addInteractivity, getAssetImage} from './src/gallery.js';

    const container = document.getElementById('thumb-container');
    window.addEventListener('resize', () => {
        renderGallery(container);
    });

    window.addEventListener('scroll', () => {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById('scroll-progress').style.width = scrolled + "%";
    })

    renderGallery(container);

    addInteractivity(container, asset => {
        document.getElementById('gallery').classList.toggle('selected-mode', true);
        document.getElementById('full-image').style.backgroundImage = `url(${getAssetImage(asset, 'full')})`;
    });

    document.getElementById('close-btn').addEventListener('click', () => {
        document.getElementById('gallery').classList.toggle('selected-mode', false);
    });

    document.getElementById('gallery-button').addEventListener('click', () =>
        document.getElementById('gallery-button').scrollIntoView({
            behavior: "smooth",
            block: "start",
            inline: "nearest"
        }));
</script>
</body>
</html>
