<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gallery</title>
    <link rel="stylesheet" href="gallery.css" />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="common.css" />
</head>
<body style="background-image: url('assets/halftone-bg.jpg')">

<div id="scroll-progress"></div>
<div id="header">
    <img class="logo" src="assets/deyoungsters-logo.svg" width="150" height="75" />
    <a href="about.html">About</a>
    <a href="help.html">Help</a>
</div>

<div id="banner">
    <div class="main-content">
        <h1>Remix <br />&nbsp;&nbsp;&nbsp;&nbsp;Gallery</h1>
        <div class="action-box">
            <span>Mix and match artists' creations to make <br/> your own halftone masterpieces</span>
            <div id="action-buttons">
                <button class="upload header" id="upload-button">
                    <br />
                    <label>Upload an image</label>
                    <br />
                    <img src="assets/upload.svg" />
                </button>
                <button class="gallery header" id="gallery-button">
                    <br />
                    <label>Start from the gallery</label>
                    <br />
                    <img src="assets/gallery.svg" />
                </button>
            </div>
        </div>
    </div>
</div>

<div id="gallery">
    <div id="thumb-container"></div>
</div>

<div id="pagination">
    <a>Previous</a><a class="page">1</a><a class="page">2</a><a class="page current">3</a><a class="page">4</a><a class="page">Next</a>
</div>

<div id="footer">
    <div class="column logo">
        <img class="logo" src="assets/deyoungsters-logo.svg" width="150" height="75" />
    </div>

    <div class="column link">
        <a href="about.html" class="link">About</a>
        <a href="help.html" class="link">Help</a>
        <span class="tinytext">Â© 2021 Fine Arts Museums of San Francisco</span>
    </div>

    <div class="column">
        <div class="social">
            <a href=""><img src="assets/facebook.svg" /></a>
            <a href=""><img src="assets/twitter.svg" /></a>
            <a href=""><img src="assets/instagram.svg" /></a>
        </div>
        <span class="address">50 Hagiwara Tea Garden Drive</span>
        <span class="address">San Francisco, CA 94118</span>
        <span class="tinytext">Credits:  Adobe</span>
    </div>
</div>

<div id="modal">
    <div class="content">
        <button id="close-btn"><img src="assets/close-icon.svg"/></button>
        <div id="full-image"></div>
        <div class="info-container">
            <h3>Kelly H.</h3>
            <span>Age 6</span>
            <button id="remix-btn"><img src="assets/remix-icon.svg"/> Remix!</button>
        </div>
    </div>
</div>

<script type="module">
    import { renderGallery, addInteractivity, getAssetImage } from './src/gallery.js';
    import { chooseFile } from './src/upload.js';

    const container = document.getElementById('thumb-container');
    window.addEventListener('resize', () => {
        renderGallery(container);
    });

    window.addEventListener('scroll', () => {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById('scroll-progress').style.width = scrolled + "%";
    })

    renderGallery(container);

    addInteractivity(container, asset => {
        document.getElementById('modal').classList.toggle('active', true);
        document.getElementById('full-image').style.backgroundImage = `url(${getAssetImage(asset, 'full')})`;
    });

    document.getElementById('close-btn').addEventListener('click', () => {
        document.getElementById('modal').classList.toggle('active', false);
    });

    document.getElementById('gallery-button').addEventListener('click', () =>
        document.getElementById('gallery-button').scrollIntoView({
            behavior: "smooth",
            block: "start",
            inline: "nearest"
        })
    );

    document.getElementById('upload-button').addEventListener('click', chooseFile );
</script>
</body>
</html>
